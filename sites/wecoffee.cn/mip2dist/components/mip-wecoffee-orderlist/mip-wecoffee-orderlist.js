!function(){var e=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=72)}({0:function(e,n){e.exports=__mipComponentsWebpackHelpers__["vue-loader/lib/runtime/componentNormalizer"]},1:function(e,n){e.exports=__mipComponentsWebpackHelpers__["css-loader/lib/css-base"]},12:function(e,n,t){var o=t(36);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t(2).default)("19363a7a",o,!1,{})},2:function(e,n){e.exports=__mipComponentsWebpackHelpers__["vue-style-loader/lib/addStylesClient"]},35:function(e,n,t){"use strict";var o=t(12);t.n(o).a},36:function(e,n,t){(e.exports=t(1)(!1)).push([e.i,"\n.wrapper {\n  overflow-y:scroll;\n  margin-top: -2px;\n}\ndiv,\nspan,\nimg {\n  -webkit-tap-highlight-color: transparent;\n}\n.btn-more {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n  line-height: 3.2em;\n  height: 3.2em;\n}\nbody {\n  background-color: #fff;\n}\n.co_red {\n  color: #e4393c;\n}\n.orderfooter {\n  height: 13.6vw;\n}\n.orderListItem {\n  /* padding: 10px; */\n  border-bottom: 2.6vw solid #e8e8ed;\n  font-size: 3.2vw;\n}\n.orderListItem i {\n  font-style: normal;\n}\n.orderHeader {\n  border-bottom: 0.7px solid rgba(0, 0, 0, 0.08);\n  padding: 3vw;\n}\n.orderHeader .goPay {\n  margin-left: 10px;\n  border: 1px solid;\n  padding: 3px 13px;\n  border-radius: 5px;\n  border-color: #f44336;\n  color: #f44336;\n  margin-bottom: 3px;\n}\n.orderListItem .box_hd {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 3.8vw;\n}\n.orderListItem .box_hd .orderNum {\n  color: #999;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.orderListItem .box_hd .orderNum i {\n  color: #333;\n}\n.orderList {\n  /* margin-top: 30px; */\n  border-top: 1px solid #dcdcdc;\n  list-style: none;\n}\n\n/* status: ({10:'等待支付', 20: '已支付', 30:'未取', 40:'已取', 50: '运送中', 60:'已送达' })[order.status], */\n.box_hd .status {\n  font-size: 3.2vw;\n  color: rgba(0, 0, 0, 0.65);\n  padding: 1.2vw 1vw;\n  line-height: 1;\n  text-align: center;\n  border-radius: 4px;\n  border: 1px solid #d9d9d9;\n  background: #fafafa;\n  white-space: nowrap;\n  margin-left: 2.6vw;\n}\n.box_hd .status_10 {\n  color: #eb2f96;\n  background: #fff0f6;\n  border-color: #ffadd2;\n}\n.box_hd .status_20 {\n  color: #1890ff;\n  background: #e6f7ff;\n  border-color: #91d5ff;\n}\n.box_hd .status_30 {\n  color: #fa541c;\n  background: #fff2e8;\n  border-color: #ffbb96;\n}\n.box_hd .status_40 {\n  color: #13c2c2;\n  background: #e6fffb;\n  border-color: #87e8de;\n}\n.box_hd .status_50 {\n  color: #52c41a;\n  background: #f6ffed;\n  border-color: #b7eb8f;\n}\n.box_hd .status_60 {\n  color: #722ed1;\n  background: #f9f0ff;\n  border-color: #d3adf7;\n}\n.box_header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.box_header .price {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.box_header .timeshow {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  text-align: center;\n  color: #c8c8c8;\n}\n.productList {\n  padding: 3vw;\n}\n.productItem {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 2.6vw;\n}\n.productItem .cover {\n  margin-right: 2.6vw;\n  background-size: cover;\n  width: 20vw;\n  height: 20vw;\n  background-color: #f3f3f3;\n}\n.goodsinfo {\n  color: #999;\n}\n.goodsinfo .name {\n  color: #333;\n  font-size: 3.2vw;\n  font-weight: bold;\n}\n.mip-wecoffee-infinitescroll-loading,\n.mip-wecoffee-infinitescroll-loading {\n  padding: 10vw;\n  text-align: center;\n  color: #999;\n}\n.rt-order {\n  padding-top: 40px;\n}\n",""])},72:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"wrapper"},[e._l(e.orderLists,function(n){return t("div",{key:n,staticClass:"orderList"},[t("li",{staticClass:"orderListItem"},[t("div",{staticClass:"box_hd orderHeader"},[t("span",{staticClass:"orderNum"},[e._v("订单号：\n          "),t("i",[e._v(e._s(n.id))])]),e._v(" "),t("span",{staticClass:"status "},[e._v(e._s(n.orderType))]),e._v(" "),t("span",{class:"status status_"+n.statusNum,on:{click:function(t){e.goPayCode(n.statusNum,n.id,n.orderType)}}},[e._v("\n          "+e._s(n.status)+"\n        ")])]),e._v(" "),t("div",{staticClass:"box_header orderHeader"},[t("span",{staticClass:"price"},[e._v("总价:\n          "),t("i",{staticClass:"co_red"},[e._v(e._s(n.price))])]),e._v(" "),t("span",{staticClass:"timeshow"},[n.isPay?t("a",{staticClass:"goPay",attrs:{href:n.payLink,"data-sf-href":n.payLink,"data-sf-options":'{"title":{"html":"支付中心"}}',"data-type":"mip"}},[e._v("去支付")]):e._e(),e._v(e._s(n.timeshow)+"\n        ")])]),e._v(" "),e._l(n.products,function(n){return t("div",{key:n,staticClass:"productList"},[t("div",{staticClass:"productItem"},[t("mip-img",{staticClass:"cover",attrs:{src:n.cover,layout:"responsive",width:"20vw",height:"20vw"}},[t("mip-showcase-icon",{staticClass:"img-placeholder",attrs:{type:"weeLogo"}})],1),e._v(" "),t("div",{staticClass:"goodsinfo"},[t("div",{staticClass:"name"},[e._v(e._s(n.name))]),e._v(" "),t("div",{staticClass:"price"},[e._v("价格："+e._s(n.price))]),e._v(" "),t("div",{staticClass:"price"},[e._v(e._s(n.count)+"杯 "+e._s(n.spec))])])],1)])})],2)])}),e._v(" "),t("div",{staticClass:"btn-more",on:{click:e.getMore}},[e._v("\n    "+e._s(e.message)+"\n  ")])],2)};o._withStripped=!0;var r={props:{info:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{isPay:!0,goodsData:[],orderLists:[],renderLists:[],pn:1,pg:10,message:null}},mounted:function(){var e=MIP.sandbox.this(this);setTimeout(function(){e.sessionId=e.info.sessionId,e.getOrderLists(),e.message="点击加载更多"},200)},methods:{goPayCode:function(e,n,t){50===e&&"现场点单"===t&&MIP.sandbox.window.MIP.viewer.open("./orderTake.html?orderId="+n+"&r="+(new Date).getTime(),{isMipLink:!0})},getMore:function(){++MIP.sandbox.this(this).pn,MIP.sandbox.this(this).getOrderLists()},getOrderLists:function(){var e=MIP.sandbox.this(this),n="/api/orders/"+MIP.sandbox.this(this).pn+"/"+MIP.sandbox.this(this).pg;fetchJsonp(n,{jsonpCallback:"callback",timeout:5e3}).then(function(e){return e.json()}).then(function(n){n&&0===parseInt(n.status,10)&&0!==n.data.orders.length?n.data.orders.map(function(n,t){var o=new Date(n.createdAt),r={id:n.id,price:n.priceCent/100,timeshow:o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes(),idx:t,status:{10:"等待支付",20:"已支付",30:"商家已接单",40:"制作中",50:2===n.orderType?"去取单":"运送中",60:2===n.orderType?"已取单":"已送达"}[n.status],statusNum:n.status,orderType:2==+n.orderType?"现场点单":"远程点单",isPay:!0,isOrder:!0};r.products=n.items.map(function(e){var n=e.sku.product;return{cover:n.imageUri,name:n.name,spec:e.sku.spec,count:e.count,price:e.sku.priceCent/100}}),10===n.status&&n.exprieTime>0?r.isPay=!0:r.isPay=!1,10==+n.status&&(+n.exprieTime>0?r.payLink="/orderPay.html?orderId="+n.id:(r.status="订单取消",r.statusNum=-1)),2!==n.orderType&&(r.isOrder=!1),n.temData=r,e.orderLists.push(r)}):e.message="没有更多订单"}).catch(function(e){console.log(e)})}}},s=(t(35),t(0)),i=t.n(s)()(r,o,[],!1,null,null,null);i.options.__file="mip-wecoffee-orderlist.vue";n.default=i.exports}});e=e.default||e,MIP["function"==typeof e?"registerCustomElement":"registerVueCustomElement"]("mip-wecoffee-orderlist",e)}();